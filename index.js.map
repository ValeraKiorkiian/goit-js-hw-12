{"version":3,"file":"index.js","sources":["../src/img/cancel.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAENSURBVHgBrZVhDoIwDIUrgfDXm+hRvBFwEr0BXsXjsJnMFVkYsvUV4SWL6Nr3MWgrUUbW2sYY6zSLY3M+Zc7cOWr9evqvL5J18av1OVRVVUdI4c6HwTxIKY5FJ/nbXA3ZYw4hR5hnIZK5MeaKDFMxC8jX3PapRPTi5lJOQWzPewHQpgz49xxkPrmcKwJyEGQe55UEVNdV64P5cmwm1tSEHe+hfAj4hUwAlTmrIKWKglzqGkl1gmg2hVmjnj0QEJuHxxK/EwiRqkGqFqmE433YaJpSFBttDnrfUxACSsWw1+LmJMhWrcyDjoBkzY+AQPM9EMl81QdhLJxOrvGfZ1L96bvblvExaj4JXtJj+QAn5UUxjHYd+gAAAABJRU5ErkJggg==\"","import axios from 'axios';\n\nexport async function getImages(userWords, page = 1, per_page) {\n  const { data } = await axios(`https://pixabay.com/api/`, {\n    params: {\n      key: `49291442-2080f69002eb1568626ca7c49`,\n      q: userWords,\n      image_type: `photo`,\n      orientation: `horizontal`,\n      safesearch: true,\n      page,\n      per_page,\n    },\n  });\n\n  return data;\n}\n","// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst list = document.querySelector(`.gallery`);\n\nconst gallery = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\" />\n        </a>\n        <div class=\"description-container\">\n        <div class=\"description\">\n          <p class=\"description-text\">Likes</p>\n          <span class=\"description-num\">${likes}</span>\n        </div>\n        <div class=\"description\">\n          <p class=\"description-text\">Views</p>\n          <span class=\"description-num\">${views}</span>\n        </div>\n        <div class=\"description\">\n          <p class=\"description-text\">Comments</p>\n          <span class=\"description-num\">${comments}</span>\n        </div>\n        <div class=\"description\">\n          <p class=\"description-text\">Downloads</p>\n          <span class=\"description-num\">${downloads}</span>\n        </div>\n        </div>\n      </li>`\n    )\n    .join(``);\n  list.insertAdjacentHTML(`beforeend`, markup);\n  gallery.refresh();\n}\n\nexport function cleanGallery() {\n  list.innerHTML = ``;\n}\n","// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconError from './img/cancel.png';\n// import functions\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery, cleanGallery } from './js/render-functions';\n\nconst iziToastContent = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again',\n  iconUrl: iconError,\n  position: 'topRight',\n  messageColor: '#fff',\n  backgroundColor: '#ef4040',\n  theme: 'dark',\n  maxWidth: '432px',\n};\nlet page = 1;\nlet userAnswer = '';\nconst per_page = 15;\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.pagination-btn');\n\nform.addEventListener(`submit`, onFormSubmit);\nloadMoreBtn.addEventListener(`click`, onLoadMoreBtnClick);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  userAnswer = event.currentTarget.elements.searchText.value.trim();\n  hideLoadMoreBtn();\n\n  if (!userAnswer) {\n    iziToast.error({\n      message: 'Please,enter search word',\n      position: 'topRight',\n    });\n    return;\n  }\n  page = 1;\n  cleanGallery();\n  showLoader();\n  try {\n    const { hits, totalHits } = await getImages(userAnswer, page, per_page);\n\n    if (hits.length === 0) {\n      iziToast.show(iziToastContent);\n      return;\n    }\n\n    renderGallery(hits);\n    showLoadMoreBtn();\n    if (page * per_page >= totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        messageColor: '#FAFAFB',\n      });\n      console.log('end');\n\n      hideLoadMoreBtn();\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error(iziToastContent);\n  } finally {\n    form.reset();\n    hideLoader();\n  }\n}\n\nasync function onLoadMoreBtnClick() {\n  showLoader();\n  page++;\n  try {\n    const { hits, totalHits } = await getImages(userAnswer, page, per_page);\n    renderGallery(hits);\n    const { height } = document\n      .querySelector(`.gallery-item`)\n      .getBoundingClientRect();\n\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n\n    if (page * per_page >= totalHits) {\n      hideLoadMoreBtn();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        messageColor: '#FAFAFB',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error(iziToastContent);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showLoader() {\n  loader.classList.remove('hiden');\n}\nfunction hideLoader() {\n  loader.classList.add('hiden');\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n"],"names":["iconError","getImages","userWords","page","per_page","data","axios","list","gallery","SimpleLightbox","renderGallery","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","cleanGallery","iziToastContent","userAnswer","form","loader","loadMoreBtn","onFormSubmit","onLoadMoreBtnClick","event","hideLoadMoreBtn","iziToast","showLoader","hits","totalHits","showLoadMoreBtn","error","hideLoader","height"],"mappings":"+vBAAA,MAAeA,EAAA,ihBCER,eAAeC,EAAUC,EAAWC,EAAO,EAAGC,EAAU,CAC7D,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,2BAA4B,CACvD,OAAQ,CACN,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAAC,CACD,CACL,CAAG,EAED,OAAOC,CACT,CCZA,MAAME,EAAO,SAAS,cAAc,UAAU,EAExCC,EAAU,IAAIC,EAAe,gBAAiB,CAClD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,wCAE4BN,CAAa;AAAA,sBAC/BC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKNC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0CAIRC,CAAS;AAAA;AAAA;AAAA,YAI9C,EACA,KAAK,EAAE,EACVZ,EAAK,mBAAmB,YAAaK,CAAM,EAC3CJ,EAAQ,QAAO,CACjB,CAEO,SAASY,GAAe,CAC7Bb,EAAK,UAAY,EACnB,CC9CA,MAAMc,EAAkB,CACtB,QACE,0EACF,QAASrB,EACT,SAAU,WACV,aAAc,OACd,gBAAiB,UACjB,MAAO,OACP,SAAU,OACZ,EACA,IAAIG,EAAO,EACPmB,EAAa,GACjB,MAAMlB,EAAW,GAEXmB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,iBAAiB,EAE5DF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAkB,EAExD,eAAeD,EAAaE,EAAO,CAKjC,GAJAA,EAAM,eAAc,EACpBN,EAAaM,EAAM,cAAc,SAAS,WAAW,MAAM,OAC3DC,IAEI,CAACP,EAAY,CACfQ,EAAS,MAAM,CACb,QAAS,2BACT,SAAU,UAChB,CAAK,EACD,MACD,CACD3B,EAAO,EACPiB,IACAW,IACA,GAAI,CACF,KAAM,CAAE,KAAAC,EAAM,UAAAC,GAAc,MAAMhC,EAAUqB,EAAYnB,EAAMC,CAAQ,EAEtE,GAAI4B,EAAK,SAAW,EAAG,CACrBF,EAAS,KAAKT,CAAe,EAC7B,MACD,CAEDX,EAAcsB,CAAI,EAClBE,IACI/B,EAAOC,GAAY6B,IACrBH,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,aAAc,SACtB,CAAO,EACD,QAAQ,IAAI,KAAK,EAEjBD,IAEH,OAAQM,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBL,EAAS,MAAMT,CAAe,CAClC,QAAY,CACRE,EAAK,MAAK,EACVa,GACD,CACH,CAEA,eAAeT,GAAqB,CAClCI,IACA5B,IACA,GAAI,CACF,KAAM,CAAE,KAAA6B,EAAM,UAAAC,GAAc,MAAMhC,EAAUqB,EAAYnB,EAAMC,CAAQ,EACtEM,EAAcsB,CAAI,EAClB,KAAM,CAAE,OAAAK,CAAM,EAAK,SAChB,cAAc,eAAe,EAC7B,wBAEH,OAAO,SAAS,CACd,IAAKA,EAAS,EACd,SAAU,QAChB,CAAK,EAEGlC,EAAOC,GAAY6B,IACrBJ,IACAC,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,aAAc,SACtB,CAAO,EAEJ,OAAQK,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBL,EAAS,MAAMT,CAAe,CAClC,QAAY,CACRe,GACD,CACH,CAEA,SAASL,GAAa,CACpBP,EAAO,UAAU,OAAO,OAAO,CACjC,CACA,SAASY,GAAa,CACpBZ,EAAO,UAAU,IAAI,OAAO,CAC9B,CAEA,SAASU,GAAkB,CACzBT,EAAY,MAAM,QAAU,OAC9B,CACA,SAASI,GAAkB,CACzBJ,EAAY,MAAM,QAAU,MAC9B"}